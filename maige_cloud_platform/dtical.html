<!DOCTYPE html>
<!-- saved from url=(0036)https://braingps.mricloud.org/dtical -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
<!--     https://braingps.mricloud.org -->
    <title>迈格云平台 | DTI参数计算</title>

    
    <link rel="shortcut icon" href="https://braingps.mricloud.org/img/favicon.ico">
    <!-- 20131205 to make the boostrap-styled components like dropdown menus working must include the boostrap.js, 
    and must include jquery before boostrap.js !!!!! -->
<!--     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1jquery.min.js" type="text/javascript"></script> -->
    <!-- point jquery source to local position, in case the googleapis.com link doesn't work -->
    <script src="jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <!-- use HTML::script() function to add script file, thus will generate absolute path!!! -->
    
<!--     <script src="bootstrap/js/bootstrap.min.js" type="text/javascript"></script> -->
<!--     <link media="all" type="text/css" rel="stylesheet" href="https://braingps.mricloud.org/fontawesome/font-awesome.min.css">
 -->
    
<!--    <script src="https://braingps.mricloud.org/bootstrap/js/bootstrap.min.js"></script>
 modify the .modal classes to enable .modal-lg etc    
    <link media="all" type="text/css" rel="stylesheet" href="https://braingps.mricloud.org/bootstrap/css/bootstrap.css">
 
    <link media="all" type="text/css" rel="stylesheet" href="https://braingps.mricloud.org/bootstrap/css/bootstrap-responsive.css">
 --> 

<!-- new version bootstrap is not compatible with 20140821 page code  
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <link media="all" type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
 
    <link media="all" type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
 
    --> 

    
    <script src="jquery/1.9.1/bootstrap.min.js"></script>
    <link media="all" type="text/css" rel="stylesheet" href="css/bootstrap.min.css">
 
<!-- this theme css change the style!!!!!!!11  
  <link media="all" type="text/css" rel="stylesheet" href="https://braingps.mricloud.org/bootstrap/bootstrap-3.2.0/dist/css/bootstrap-theme.min.css">
 --> 
    
<!--    <link media="all" type="text/css" rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
     <link media="all" type="text/css" rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
 
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
-->
    
    <link media="all" type="text/css" rel="stylesheet" href="css/font-awesome.css">
    <link media="all" type="text/css" rel="stylesheet" href="css/style.css">
<!-- 
    <link media="all" type="text/css" rel="stylesheet" href="https://braingps.mricloud.org/bootstrap/3.0.3/css/bootstrap.css">
    <link media="all" type="text/css" rel="stylesheet" href="https://braingps.mricloud.org/bootstrap/3.0.3/css/bootstrap.min.css">
    <link media="all" type="text/css" rel="stylesheet" href="https://braingps.mricloud.org/bootstrap/3.0.3/css/bootstrap-theme.css">
    <link media="all" type="text/css" rel="stylesheet" href="https://braingps.mricloud.org/bootstrap/3.0.3/css/bootstrap-theme.min.css">
     <link media="all" type="text/css" rel="stylesheet" href="https://braingps.mricloud.org/css/style.css">
 -->   <link rel="stylesheet" href="css/jquery.fileupload-ui.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

	
	
	
		<link type="text/css" href="./addfiles/sliders.css" rel="stylesheet">
		<link type="text/css" href="./addfiles/elian.css" rel="stylesheet">
		<link type="text/css" href="./addfiles/mycss.css" rel="stylesheet">
		<link type="text/css" href="./addfiles/bootstrap.min.css" rel="stylesheet">
		<script type="text/javascript" src="./addfiles/swiper-3.3.1.min.js"></script>
		<link rel="stylesheet" href="./addfiles/swiper-3.3.1.min.css">
		<script src="./addfiles/jquery.min.js"></script>
		<script src="./addfiles/bootstrap.min.js"></script>
		<script src="bootstrap/bootstrap-3.2.0/dist/js/bootstrap.min.js"></script>
	
	
	
	
	
	
	
	
  </head>
  <body>
		        <div class="container">
        <div class="navbar navbar-default">
             <div class="container-fluid"> 
            
            <ul class="nav navbar-nav">
			<!-- UrlHelper::get_active("home") will return whether the button will appear active according to the path name -->
			<!-- HTML::link('home','Home') first argument is path, second argument is the displayed string of the button -->
            <li class=""><a href="BrainGPSindex.html">主页</a></li>
			<li class="dropdown">
 	         <a href="https://braingps.mricloud.org/dtical" class="dropdown-toggle" data-toggle="dropdown">手册<b class="caret"></b></a> 
	        	<ul class="dropdown-menu">
	            <li><a href="tutorial.html">T1-多图谱分割</a></li>
	           	<li><a href="https://braingps.mricloud.org/docs/MriCloudRelease_DTI.pdf">DTI Calculation</a></li>
	            </ul>
			</li>
<!--         <li class=""><a href="datasources.html">数据来源</a></li>
             <li class=""><a href="https://braingps.mricloud.org/processingservers">Processing Servers</a></li>
              <li class=""><a href="https://braingps.mricloud.org/lddmm">LDDMM</a></li>
              <li class=""><a href="https://braingps.mricloud.org/t1seg">T1Seg</a></li>
              <li class=""><a href="https://braingps.mricloud.org/roivis">ROIVis</a></li>
              <li class=""><a href="myjobstatus.html">我的工作状态</a></li>
-->               
				<li class="dropdown">
 		         <a href="https://braingps.mricloud.org/dtical" class="dropdown-toggle" data-toggle="dropdown">T1图像多图谱分割<b class="caret"></b></a> 
		        	<ul class="dropdown-menu">
<!-- 	              <li class=""><a href="https://braingps.mricloud.org/lddmm">LDDMM</a></li> -->
		        
<!--              <li class=""><a href="https://braingps.mricloud.org/t1prep">T1-Brain/Skull/CSF/Ventricle</a></li> -->
	              <li class=""><a href="t1prep.html">T1-多图谱分割</a></li>
<!--              <li class=""><a href="https://braingps.mricloud.org/t1seg">T1-250</a></li> -->
		    	  <li class=""><a href="t1batch.html">T1-多图谱分割批处理</a></li>
	              		    	              </ul>
		      </li>
				<li class="dropdown">
 		         <a href="https://braingps.mricloud.org/dtical" class="dropdown-toggle" data-toggle="dropdown">DTI<b class="caret"></b></a> 
		        	<ul class="dropdown-menu">
		      	      <li class="active"><a href="dtical.html">DTI 参数计算</a></li>
		      	      <li class=""><a href="dtimultiatlasseg.html">DTI 多图谱分割</a></li>
		      	      </ul>
      	      </li>
	      	  <li class=""><a href="fmri.html">FMRI</a></li> 	              
	      	  <li class=""><a href="asl.html">ASL</a></li> 	              
      	      		          	       	              
      	      <li class="dropdown">
 		         <a href="https://braingps.mricloud.org/dtical" class="dropdown-toggle" data-toggle="dropdown">表面绘制<b class="caret"></b></a> 
	        	<ul class="dropdown-menu">
              	<li class=""><a href="ste.html">从人群中建立表面模板</a></li> 	              
              	<li class=""><a href="surfacelddmm.html">将表面模板映射到人群中</a></li> 	              
<!--               	<li class=""><a href="https://braingps.mricloud.org/ste">STE</a></li> 	              
              	<li class=""><a href="https://braingps.mricloud.org/surfacelddmm">surface LDDMM</a></li> --> 	              
              	</ul>
		      </li>
<!-- 	          <li class=""><a href="https://braingps.mricloud.org/roivis">ROIVis</a></li>-->
	          <li class=""><a href="myjobstatus.html">我的工作状态</a></li>
	          <li class=""><a href="atlasrepo.html">图谱信息</a></li>	          
		      
		    	<li class=""><a href="profile.html">我的个人信息</a></li>		
				<li class=""><a href="https://braingps.mricloud.org/logout">登出</a></li>					

              </ul>
          </div><!--/.nav-collapse -->
      </div>
      </div>

   <div class="container" style="margin-top:100px"> 
    <div class="nav navbar-default">

        <h4>DTI Mapping</h4>
<form method="POST" action="https://braingps.mricloud.org/dtical" accept-charset="UTF-8" class="form-horizontal" id="fileupload"><input name="_token" type="hidden" value="PEj7qZXOVxvHQDDF9TIPTlpKeIEBnt6zhRKeelU3">
	Manual is available <a href="https://braingps.mricloud.org/docs/MriCloudRelease_DTI.pdf" target="_blank">here</a>.
	<div> <p><strong>Warning</strong>: Due to limited storage space, all jobs and their results will 
be deleted from our server after 60 days from submission date, please download results in time.
</p></div>	<!--	<div>
	If your images are in DICOM format, please first convert them to Analyze format.
	Click <a href="tools/Dcm2Analyze.exe" >here</a> to download a conversion tool for Windows OS						
	</div>
	--> 		
<div><p>Warning: All visualization in MriCloud follows the Radiology convention: 
the image left is the patient right. We are aware of inconsistency in the definitions of 
image orientations in DICOM, Analyze, and other file types. We guarantee the right-left 
orientation ONLY WHEN the raw DICOM files FROM scanners (not from PACS and other data 
archiving systems) are converted to the 4D Raw-Image format using the programs we offer. 
According to your operating system, download the program for <a href="https://braingps.mricloud.org/tools/DwiDcm2DpfRaw.exe">Windows</a> or <a href="https://braingps.mricloud.org/tools/DwiDcm2DpfRaw.dmg">MacOS</a> . 
This software extract the images and created a 4D raw image matrix. 
In addition, Data Parameter File (.dpf) is created to keep the image parameter information, which is in the ASCII format. 
If the data are exported from other software or the images are touched by external software during the preparation, 
the users have the responsibility to identify the right-left orientation, regardless of our labeling. 
This can be done by inspecting the images in our output files and compare them with another visualization program you trust, 
preferably the scanner vendors’ console or workstations. 
One important option in this conversion program is if the gradient table should be rotated based on oblique scan parameters. 
Whether this option needs to be activated could depend on the scanner type, 
the operating system, and the DICOM version. 
The best way to judge is to scan DTI with a severely oblique angle and see the impact of the option.
We also offer tool that converts Nifity format data to Raw/Dpf files: download the program for <a href="https://braingps.mricloud.org/tools/DwiNifti2DpfRaw.exe">Windows</a> or <a href="https://braingps.mricloud.org/tools/DwiNifti2DpfRaw.dmg">MacOS</a>. 
</p>
</div>
    <!-- The fileinput-button span is used to style the file input field as button -->
    <p><strong>Upload zip file</strong></p>
    <p>To start over, refresh the page</p>    
<!--     <p>How to prepare a zip file of the DWI dataset<br>
Philipe PAR/REC:	 compress the ".par/.rec" file-pairs into a single .zip file<br>
DICOM or Mosaic:	 pack all files under the DWI data directory as a .zip file, do not include the directory structure in the zip file.<br>
Nifti:	 zip ".nii", ".bvec" and ".bval" files as a .zip file</p><br> -->
	<!-- as the bootstrap changes the classname will change -->    <span class="btn btn-success fileinput-button">
        <i class="icon-plus icon-white"></i>
        <span>Zip</span>
        <input type="file" name="zip_file">
    </span>
    <br>
    <br>
    <p><strong>Files selected</strong></p>
    <div id="files" class="files"></div>
    <br>
       <p class="subheading">Select File Format</p>
        <select name="file_format" id="file_format" class="form-control span7">
                          <option value="7">4D-Image &amp; Diffusion parameter file (.dpf/.raw)</option>
                    </select>
        <br>
       <p class="subheading">Select Process Type</p>
        <select name="process_type" id="process_type" class="form-control span7">
                          <option value="3">Image QC + DTI Mapping</option>
                    </select>
        <br>
        
		<p class="subheading">Select processing server</p>
<!--         <select name="processing_serverid" id="processing_serverid" class="form-control span5"> -->
		<!-- upon Susumu's request gray out the option of processing servers on mricloud-->
        <select name="processing_serverid" id="processing_serverid" class="form-control span5">	
	        
        	              <option value="Gordon">Computational Anatomy Science Gateway</option>
                    </select>
        <p></p>
        <p></p>
        <p> <span class="subheading">Description: </span> (e.g. AD_subject1)</p>
<input placeholder="write job description here" class="form-control span5" name="description" type="text" value="">                
    <!-- The global progress bar -->
        <p></p>
        <p><strong>Progress</strong></p>
    <div id="progress" class="progress"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div>
        <br>    
    <button class="btn" id="pb">Submit</button>
    <br>


</form><script>var filetyperegex = /(\.|\/)(zip)$/i ;</script>    
        
    </div>
    </div>

    <div class="container">
    <footer>
  		
    <div class="container text-center">
        <hr>
<p style="font-size:14px;font-family:微软雅黑">迈格云平台  <br> Site created by <a href="http://www.anatomyworks.com/">AnatomyWorks, LLC</a>. All Rights Reserved 2016 
<a href="https://braingps.mricloud.org/dtical#mricloud_tip"><i class="icon-info-sign" id="mricloudtip" data-hasqtip="0"></i></a>
		</p><div id="mricloud_tip" style="display:none">
		<p>	MriCloud 1.0</p>
		<p>Copyright 2013 AnatomyWorks LLC, <a href="https://www.anatomyworks.com/">www.anatomyworks.com</a>
</p><p>This website was created by AnatomyWorks. BrainGPS algorithms and brain atlas resources are licensed from Johns Hopkins University.</p>
<p>MriCloud is not intended for clinical use and should be used for research purpose only.</p>
        </div>
<!-- put all the content and behavior of the module in one place -->
        
<script src="jquery/1.9.1/jquery.qtip.min.js"></script>
<link rel="stylesheet" href="css/jquery.qtip.min.css">
	<script> 	
    // tooltip http://qtip2.com/demos
    $('#mricloudtip').each(function() {
        $(this).qtip({
            content: {
//                text: $(this).next('.tooltiptext')
                  text: $('#mricloud_tip').html()
            },
            position: {
                target: 'mouse', // Position it where the click was...
                adjust: { mouse: false } // ...but don't follow the mouse
            }           
            
        });
    });   
</script><p></p>
<!--  <a href="#" data-toggle="tooltip" title="MRICloud  DiffeoMap 1.0
Copyright 2013 AnatomyWorks Inc., www.AnatomyWorks.com
MRICloud DiffeoMap is based on the AnatomyWorks patented DiffeoMAP GPS image analysis technologies for medical imaging and atlas based semantic representation of dense medical imagery. It enables any researcher working in the field of Computational Anatomy in Medical imaging to parse MR imagery into an ontological labeling based on parcellated atlas fields provided by researchers at Johns Hopkins University Susumu Mori from the Department of Radiology in the School of Medicine and Michael Miller from the Center for Imaging Science in the Whiting School of Engineering.
The DIffeoMap solutions for segmentation and image analysis currently support a large number of disease and age matched atlases built with a common neuroscience ontology.
MRICloud DiffeoMAP is licensed for use for research purposes only.
MRICloud is not intended for clinical use, and makes no representation that it is a clinically approved medical device. Analysis result must not be used for any purpose other than research. Each licensed user is issued with a corresponding license agreement which is either accepted or declined during the initial use of the software. If declined, the user cannot use MRICloud. 
If you have questions, please do not hesitate to contact us at …. or at info@MRICloud.org.
"><i class="icon-info-sign icon-large"></i></a>  		 
        <a class="nounderline" href="#" data-toggle="tooltip" title="GETTING STARTED
To enroll, if you are an MRIStudio user then the system will recognize you. If you are a new user with a Gmail account then MRICloud supports opened.
SEGMENTATION
MRICloud currently supports T1 and DTI segmentation.
T1-Brain/Skull/Ventricle/CSF provides a 4-5 label segmentation in native coordinates giving the user access to Brain (G+W) compartment, Skull compartment, Ventricle compartment, and CSF compartment. The service returns the following metadata in Native coordinates: … To use the service, select from the drop down SEGMENTATION button T1-Brain… Then select the dataset to be uploaded from either disk or an XNAT source. The status of your job will be in the Status section.
T1-250 provides a 250 label segmentation in native coordinates giving the user access to all such compartments. It’s use is the same as above.
DTI provides a …..
  		"><i class="icon-question-sign icon-large"></i></a>-->
        
        </div>
    </footer>
    </div>
    
    
<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1jquery.min.js"></script>  -->
<script src="jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<script src="jquery/1.9.1/jquery.ui.widget.js"></script>
<script src="jquery/1.9.1/jquery.iframe-transport.js"></script>
<script src="jquery/1.9.1/jquery.fileupload.js"></script>
<script src="jquery/1.9.1/jquery.fileupload-process.js"></script>
<script src="jquery/1.9.1/jquery.fileupload-validate.js"></script>

<script>

var num_added = 0;
var added = 0;
var all_data = {};

function getName(Object, name) {
    return Object[name];
}
$(function () {
    'use strict';
        var uploadButton = $('<button/>')
            .addClass('btn')
            .prop('disabled', true)
            .text('Processing...')
            .on('click', function () {
                var $this = $(this),
                    data = $this.data();
                $this
                    .off('click')
                    .text('Abort')
                    .on('click', function () {
                        $this.remove();
                        data.abort();
                    });
                data.submit().always(function () {
                    $this.remove();
                });
            });
    $('#fileupload').fileupload({
        dataType: 'json', autoUpload: false,
        singleFileUploads: false,
        acceptFileTypes: filetyperegex,
        maxFileSize: 200000000, // 200 MB
        disableImageResize: true,
        // disable pasting file, pasting any string in the input box will trigger the fileuploadadd event handler, 
        pasteZone: null
    }).on('fileuploadadd', function (e, data) {
        data.context = $('#pb').text('Upload')
            .click(function () {
                data.context = $('<p/>').text('Uploading...').replaceAll($(this));
                data.submit();
            });
        data.context = $('<div/>').appendTo('#files');
        $.each(data.files, function (index, file) {
            var node = $('<p/>')
                    .append($('<span/>').text(file.name));
            if (!index) {
                node
                    .append('<br>');
                    <!--.append(uploadButton.clone(true).data(data));-->
            }
            node.appendTo(data.context);
        });
        num_added++;
    }).on('fileuploadprocessalways', function (e, data) {
        var index = data.index,
            file = data.files[index],
            node = $(data.context.children()[index]);
        if (file.preview) {
            node
                .prepend('<br>')
                .prepend(file.preview);
        }
        if (file.error) {
            node
                .append('<br>')
                .append(file.error);
        }
        if (index + 1 === data.files.length) {
            data.context.find('button')
                .text('Upload')
                .prop('disabled', !!data.files.error);
        }
    }).on('fileuploadprogressall', function (e, data) {
        var progress = parseInt(data.loaded / data.total * 100, 10);
//        $('#progress .bar').css( 'width', progress + '%');
        $('#progress .progress-bar').css( 'width', progress + '%');
        })
        .on('fileuploaddone', function (e, data) {
        data.context.text('Upload complete. Please check the status of your job at My Job Status');
        $.each(data.files, function (index, file) {
        //    alert(JSON.stringify(file));
            var link = $('<a>') .attr('target','_blank') .prop('href', file.url);
            $(data.context.children()[index]).wrap(link);
        });
    }).on('fileuploadsubmit', function (e, data) {
/* */   if(added < num_added)
        {
            if (added == 0)
            {
                all_data = data;
            }
            else
            {
                $.each(data['files'], function(i, file){
                    all_data['files'].push(file);
                });
                $.each(data['context'], function(i, context){
                    all_data['context'].push(context);
                });
                $.each(data['fileInput'], function(i, context){
                    all_data['fileInput'].push(context);
                });
                $.each(data['form'], function(i, context){
                    all_data['form'].push(context);
                });
                $.each(data['paramName'], function(i, context){
                    all_data['paramName'].push(context);
                });
            }
            added++;
            if (added == num_added)
            {
                added++;
                all_data.submit();
            }
            return false;
            
        }
    }).on('fileuploadsend', function (e, data) {
        num_added = 0; added = 0;
    }).on('fileuploadfail', function (e, data) {
        // display the error message in a message box
    	alert('Error: '+data._response.jqXHR.responseText+' Refresh the page to reupload.' );        
        $.each(data.files, function (index, file) {
            var error = $('<span/>').text(file.error);
            $(data.context.children()[index])
                .append('<br>')
                .append(error);
        });
    }).prop('disabled', !$.support.fileInput)
        .parent().addClass($.support.fileInput ? undefined : 'disabled');

    // progress bar should work with fileuploadprogressall function, it's for bootstrap 3.2.0
    $('#progress').addClass( "progress")
    .html('<div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>');
        

    
});
</script>
    <!-- have to yield the sections for javascript, the partial blades must put javascript include source files at the end!
    	if they are in the middle of the page, the libraries will not be loaded when calling jquery on document ready function!
    	the order the javascript source files loaded matters!!!!!!!
    	clinicalformjs must be load last to enable expandable feature!!!!!!!11
     --> 
                    
  
</body></html>